# Arc - Anonymous Relay Chat

**Arc** (**A**nonymous **R**elay **C**hat / **匿**名 **中**继 **聊**天) 是新型的**零信任**、**渐进式**通讯应用.为您提供的匿名的、且安全的在聊天服务, 简洁且高性能。

### 初衷
- 流行的即时通讯软件, 虽然功能强大, 但在用户隐私, 抗审查性上做的不尽人意. 全球E2EE的用户约30亿,  这是一个趋势.
- 提供一款开源的端到端加密的, 简单快捷, 可以自主部署的匿名聊天服务.

### 简介
- 基于Rust和Solidjs构建, 只提供Web版, 移动端的浏览器中也可以使用;
- 渐进式的Chat, 普通的群组 -> 加密的群组 -> 端到端的私人聊天, 安全性逐级增强;
- 一键创建端到端加密的私人聊天邀请, 对方点击即可开启聊天;
- 支持文本, 图片, 文件, 语音等多种消息;
- 支持离线消息;
- 开启peer_mode 配置后, 将加入一个虚拟的Relay Network, 用户可以发现其他同类Peers, 并可以在不同peer间漫游;
- 支持slash(/) command, 降低用户的学习成本, 提供简洁的用户体验.
- 一键式自主部署, 启动内存<10M, 高性能且稳定可靠.

### 用途
- 家庭及朋友间聊天, 不泄漏个人隐私, 免除大数据的跟踪和政府审查;
- 临时的安全通信, 通过链接分享, 快速开启端到端加密(e2ee)的一对一私聊或收发机密文件等;
- 树洞聊天, 匿名交友, 发现同好;
- 备用的安全通讯方式;

### 设计
- 匿名性
  + 在客户端生成一对基于ed25519的密钥对, 其public key作为用户的标识, 称作KID; Private Key保存在客户端的IndexedDB数据库中;
  + 为用户生成一个随机的nick_name, 可随时修改,不要求唯一.
  + 以上设计, 用户将不需要注册, 登陆等传统的步骤, 自然也无需记住用户名/密码. 同时, 不会泄漏个人的身份信息如邮箱,手机等;
  + 服务器不保存任何与用户身份有关的数据;
- 安全性
  + 群组及私聊的文本, 图片, 语音消息均采用流行且高效的XChacha20-poly1305算法加密, 该算法是开源的,采用的实现来自[RustCrypto](https://github.com/RustCrypto)
  + 每条消息采用随机的nonce;
  + 加密群组(encrypted-group)和私聊(priv-chats) 均实现End-to-End Encryption; 服务器端无法获取聊天室的对称加密密钥.
  + 加密群组根据Room Salt, RoomID及PassCode生成对称加密的密钥.
  + 私聊双方利用ECDH实现密钥协商, 具体实现来自[dalek-cryptography](https://github.com/dalek-cryptography))的x25519算法;
  + 私聊双方在交换ECDH的公钥时, 使用ECDSA对交换信息进行数字签名, 避免中间人攻击, 具体库用的同样是dalek_cryptograph的ed25519算法;
  + 私聊的全部消息均保存在本地浏览器数据库中.
  + 客户端采用的关键安全操作,封装在WebAssembly中(同样开源:[crypto-wasm](https://github.com/x-ira/crypto-wasm)), 以增强安全性和性能;
  + 支持应用锁屏, 可设置一个PIN, 加强客户端隐私保护;
- 其他
  + 服务端采用Rust实现, 采用的channel等无锁通信技术, 同时, 使用高性能的concurrent库, 如Dashmap等;
  + 客户端使用solidjs  + WebAssembly(Crypto);
  + 通讯协议为WebSocket,传输格式为二进制数据(Binary), 使用MessagePack为序列化协议.
  + 节点发现使用DHT, 具体为Mainline DHT.
  
  
## 开源协议
本项目采用 [Apache License v2.0](https://www.apache.org/licenses/LICENSE-2.0) 开源协议，允许自由使用、修改和分发。

## ⚠️ 免责声明

- 本项目仅供学习和合法用途使用.
- 用户需遵守当地法律法规, 请勿将本项目提供的软件用于违法当地法律的活动中.
- 开发者不承担任何使用风险和法律责任.
- 本项目尚未接受外部安全审查，可能包含漏洞。请勿用于敏感用例，并且在审查之前请勿依赖其安全性.
- 强烈建议在重要通信前进行安全审计.

### __Contributing__
- 欢迎提交PR, 欢迎同道者加入共建!
- mail: kira.x@tuta.io
>  🤝 **帮助我们构建私人通信的未来！** 每一份贡献都很重要。

### __FAQ__

- 最佳使用实践?
  + 为实现最佳隐私保护效果, 建议使用VPN连接节点, 避免IP暴露, 配合Tor使用更安全;
  + 如果Self-Hosting, 最好提供HTTPS访问,功能更全, 也更安全;
- 中继(Relay)节点会转发消息吗?
  + 不会, 由于节点的不稳定性, 用户只能在同一节点下聊天; 如需跨区, 需要一方先漫游(roaming)到另一方所在节点;
- 中继(Relay)节点能看到什么?
  + 每个节点都是中继节点, 其不存储用户的个人档案(profile), 联系人, 聊天消息等, 互相之间也不连接交换信息;
  + 但会在临时缓存加密后的待转发消息(如离线消息);
- 如何开启私人聊天?
  + 目前需要在群聊中, 输入: /invite 命令开启, 对方会立刻收到通知, 同意后即可开启私聊;
- 私聊是悄悄话吗?
  + 悄悄话(wisper)是在群聊中, 指定发送给某人, 消息走群的通道, 不是私聊(private-chat).
- 为什么显示‘Media Service Not Supported’?
  + 语音消息需要在https环境下或localhost, 才可用, 普通http浏览器不支持.
- 如何快速抹除客户端数据?
  + 在setting页面中, 可以移除所有私聊的信息和群聊元数据.
- 如何拉黑/屏蔽某个用户?
  + 在聊天页面, 输入/block命令, 根据提示操作;  若要解除屏蔽, 使用/unblock命令;
  + 如果多个人block了同一用户, 累计超过一定次数(可配置), 给用户将被banned, 需等待指定的时间后, 才能解除banned状态;

## ⚡ 闪电部署

> 🎆 **2 分钟内开始使用！** Arc 专为即时部署而设计，零麻烦。

### 💻 系统要求
- **Rust**: 1.70+ （若从源码构建）
- **操作系统**: Windows、macOS、Linux 或任何现代操作系统
- **存储**: 应用程序约 10MB

### 📬 快速安装

#### 选项 1: 一键部署 (推荐)
下载预编译好的版本, 解压后即可使用.

#### 选项 2: 生产构建
```bash
# 1. 克隆仓库
git clone https://github.com/x-ira/arc-chat.git
cd arc

# 2. 构建优化版本
cargo build --release

# 3. 启动 Arc
./target/release/arc

🌐 在 http://localhost:1930 访问您的安全聊天
```

### 🌐 首次使用
1. **🚀 启动**: 运行上述命令启动您的中继节点
2. **🌍 连接**: 在浏览器中打开 `http://localhost:1930`
3. **📧 创建身份**: 您的匿名密码学身份自动生成
4. **🔄 加入网络**: 您的节点自动加入全球中继网络
5. **💬 开始聊天**: 立即通过加密中继链发送消息

> ⚡ **专业提示**: Arc 使用默认设置立即工作。您同时是用户和中继节点，为所有人加强网络！

## ⚙️ 配置

通过 `conf/default.toml` 配置应用程序：

```toml
[app]
name = "Arc"           # 应用程序名称
lan_port = 1930        # 监听端口
wan_port = 2010        # 中继端口

[room]
max_cached_msgs = 100  # 房间消息缓存限制

[log]
level = "info"         # 日志级别
```

## 📚 入门指南

### 🏠 **创建您的第一个房间**
1. **🚀 启动 Arc** 并打开 Web 界面
2. **✨ 点击"创建房间"** - 无需注册！
3. **🎲 设置房间名称** 和可选访问规则
4. **🔗 分享房间链接** 给朋友（安全加密）
5. **🎉 开始聊天** 立即享受端到端加密

### 🔐 **匿名私人对话**
1. **🔑 交换 KIDs**（密码学标识符）与您的联系人
2. **📨 发送邀请** 通过多个匿名中继路由
3. **✅ 接受连接** 建立多跳加密中继通道
4. **💬 匿名聊天** 消息通过随机中继路径跳转
5. **🔥 幽灵模式** 获得最大匿名性与扩展中继链

### 📁 **匿名文件中继**
- **🚀 速度**: 智能中继选择实现最佳传输性能

```bash
# 开发环境设置
rustup component add clippy rustfmt
cargo test && cargo clippy && cargo fmt
```

### 🐛 **发现了 Bug？**
在 [GitHub Issues](https://github.com/x-ira/arc-chat/issues) 上报告 - 我们在 24 小时内修复关键安全问题！

### 💬 **需要帮助？**
- 📚 **文档**: `/docs` 中的综合指南
- 👥 **社区**: 加入我们的安全 Arc 房间获得支持
- 📧 **联系**: 仅通过加密渠道联系

##  **Arc - 隐私革命**

> *"在一个处处监控的世界里，匿名不是奢侈品 - 而是必需品。"*

🔗 **链接**
- 🌍 **源代码**: [GitHub 仓库](https://github.com/x-ira/arc-chat)
- 📚 **文档**: [技术文档](./docs/)
- 🛡️ **安全审计**: [审计报告](./docs/security/)
- 🐛 **问题**: [Bug 报告和功能](https://github.com/x-ira/arc-chat/issues)


*Built with ❤️ by the Arc Team*
