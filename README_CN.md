# Arc - 匿名安全聊天应用 🛡️

Arc 是一个基于 Rust 开发的分布式、匿名、端到端加密的聊天应用。通过先进的密码学技术和 P2P 网络，为用户提供极致的隐私保护和通信安全。

## 🔒 核心安全特性

### 端到端加密 (E2EE)
- **多重加密算法**：支持 AES-GCM 和 ChaCha20-Poly1305 流密码
- **密钥交换**：使用椭圆曲线迪菲-赫尔曼 (ECDH) 协议安全交换密钥
- **数字签名**：ECDSA 数字签名确保消息完整性和身份认证
- **前向保密**：每次会话使用独立密钥，确保历史消息安全

### 匿名性保护
- **无中心服务器**：基于 DHT (分布式哈希表) 的 P2P 架构
- **身份隐私**：用户通过加密的公钥标识符 (KID) 进行识别
- **网络匿名**：支持去中心化节点发现，无需暴露真实身份
- **元数据保护**：最小化可追踪的通信元数据

### 数据安全
- **本地存储加密**：所有敏感数据在本地加密存储 (ReDB)
- **内存安全**：Rust 语言特性提供内存安全保障
- **零日志策略**：服务端不记录用户通信内容
- **安全认证**：基于 HMAC 的时间戳签名防止重放攻击

## ⚡ 功能特色

### 💬 多种通信模式
- **公开房间**：支持多人群聊，实时消息同步
- **私密聊天**：点对点加密通信，完全匿名
- **悄悄话**：房间内定向私密消息
- **多媒体支持**：安全的图片、语音文件传输

### 🌐 分布式架构
- **P2P 网络**：无需中央服务器，抗审查能力强
- **节点自动发现**：通过 DHT 网络自动发现在线节点
- **负载均衡**：分布式架构天然支持高并发
- **容错机制**：单点故障不影响整体网络运行

### 🛠️ 易用性设计
- **一键启动**：简单的命令行启动，无需复杂配置
- **现代化 Web 界面**：基于 SolidJS 的响应式前端
- **跨平台支持**：支持 Windows、macOS、Linux 等主流操作系统
- **实时通信**：基于 WebSocket 的实时消息推送

## 🚀 快速开始

### 系统要求
- Rust 1.70+ 
- Node.js 18+ (用于前端构建)
- 操作系统：Windows、macOS、Linux

### 安装运行

```bash
# 1. 克隆项目
git clone https://github.com/yourusername/arc.git
cd arc

# 2. 构建 Rust 后端
cargo build --release

# 3. 构建前端 (可选，如果需要自定义界面)
cd web
npm install
npm run build
cd ..

# 4. 启动应用
./target/release/arc

# 应用将在 http://localhost:1930 启动
```

### Docker 部署

```bash
# 构建镜像
docker build -t arc-chat .

# 运行容器
docker run -p 1930:1930 arc-chat
```

## ⚙️ 配置说明

应用通过 `conf/default.toml` 文件进行配置：

```toml
[app]
name = "Arc"           # 应用名称
port = 1930           # 监听端口

[room]
max_cached_msgs = 100  # 房间消息缓存上限

[log]
level = "info"         # 日志级别
```

### 高级配置

```toml
# 启用用户初始化 (仅开发环境)
init_users = false

# 安全设置
default.pass_hash = "your_hash_here"  # 默认密码哈希
access_token_life = 604800000         # 访问令牌有效期(7天)
request_timeout = 5000                # 请求超时时间(毫秒)
```

## 🔧 技术架构

### 后端技术栈
- **Rust** - 系统级安全和性能
- **Axum** - 现代异步 Web 框架  
- **Tokio** - 高性能异步运行时
- **ReDB** - 嵌入式数据库，安全存储
- **Mainline DHT** - 分布式网络发现

### 前端技术栈
- **SolidJS** - 响应式 Web 框架
- **WebAssembly** - 客户端密码学运算
- **IndexedDB** - 浏览器本地存储
- **WebSocket** - 实时双向通信

### 密码学组件
- **AES-GCM / ChaCha20-Poly1305** - 对称加密
- **ECDH P-256** - 密钥交换
- **ECDSA** - 数字签名
- **HMAC-SHA256** - 消息认证

## 🛡️ 安全保证

### 威胁模型防护
- ✅ **网络监听**：端到端加密防止传输窃听
- ✅ **服务器入侵**：去中心化架构无单点风险  
- ✅ **身份追踪**：匿名标识符保护真实身份
- ✅ **重放攻击**：时间戳签名防止消息重放
- ✅ **中间人攻击**：数字签名验证身份真实性

### 隐私保护
- **零知识原则**：服务端无法解读用户消息内容
- **最小化数据收集**：只收集必要的网络路由信息
- **本地密钥管理**：私钥从不离开用户设备
- **临时会话**：支持无痕聊天模式

## 📖 使用指南

### 创建房间
1. 启动应用后访问 Web 界面
2. 点击"创建房间"按钮
3. 设置房间名称和访问权限
4. 分享房间链接给其他用户

### 私密聊天
1. 获取对方的公钥标识符 (KID)
2. 发送加密邀请
3. 对方确认后建立端到端加密通道
4. 开始匿名安全通信

### 发送文件
- 支持图片：PNG、JPG、GIF 等格式
- 支持语音：自动压缩和加密传输
- 文件大小限制：单文件不超过 20MB
- 自动病毒扫描和安全检查

## 🤝 贡献指南

我们欢迎社区贡献！请遵循以下步骤：

1. **Fork 项目**并创建特性分支
2. **编写测试**确保代码质量
3. **遵循代码规范**使用 `cargo fmt` 格式化
4. **提交 Pull Request**并详细说明改动

### 开发环境设置

```bash
# 安装开发依赖
rustup component add clippy rustfmt

# 运行测试
cargo test

# 代码检查
cargo clippy

# 格式化代码  
cargo fmt
```

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源协议，允许自由使用、修改和分发。

## ⚠️ 免责声明

- 本软件仅供学习和合法用途使用
- 用户需遵守当地法律法规
- 开发者不承担任何使用风险和法律责任
- 强烈建议在重要通信前进行安全审计

## 🔗 相关资源

- [项目主页](https://github.com/yourusername/arc)
- [技术文档](./docs/technical.md)
- [安全审计报告](./docs/security-audit.md)
- [问题反馈](https://github.com/yourusername/arc/issues)

---

**Arc** - 让隐私通信回归本质 🚀

*Built with ❤️ by the Arc Team*
